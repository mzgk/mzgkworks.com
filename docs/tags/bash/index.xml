<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bash on mzgkworks.com</title>
    <link>http://mzgkworks.com/tags/bash/index.xml</link>
    <description>Recent content in Bash on mzgkworks.com</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <atom:link href="http://mzgkworks.com/tags/bash/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>bashでの圧縮と展開（zip, gz, bz2, xz, tar）</title>
      <link>http://mzgkworks.com/post/bash-zip-unzip/</link>
      <pubDate>Wed, 07 Sep 2016 17:18:07 +0900</pubDate>
      
      <guid>http://mzgkworks.com/post/bash-zip-unzip/</guid>
      <description>

&lt;h2 id=&#34;圧縮と展開&#34;&gt;圧縮と展開&lt;/h2&gt;

&lt;p&gt;よく使われる拡張子とコマンド。&lt;br /&gt;
圧縮率 : .zip &amp;lt; .gz &amp;lt; .bz2 &amp;lt; .xz&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;拡張子&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;圧縮コマンド&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;展開コマンド&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.zip&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;zip&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;unzip&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.gz&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;gzip&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;gunzip&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.bz2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;bzip2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;bunzip2&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.xz&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;xz&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;xz -d&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;ファイルの圧縮と展開&#34;&gt;ファイルの圧縮と展開&lt;/h2&gt;

&lt;p&gt;基本的な使い方のみ。&lt;br /&gt;
zipのみ &lt;code&gt;-r&lt;/code&gt;指定で書庫を作らずにディレクトリごと圧縮が可能。&lt;/p&gt;

&lt;h3 id=&#34;zip&#34;&gt;zip&lt;/h3&gt;

&lt;p&gt;zipは圧縮後のファイル名を指定したり、ディレクトリごとの圧縮を行う。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# archive.zipという名前で、A.txtとB.txtを圧縮
# 圧縮したファイルは残る
$ zip archive A.txt B.txt
$ ls
archive.zip  A.txt  B.txt

# ディレクトリごと圧縮する
$ zip -r archive A_Dir

# workディレクトリ（なければ作成）に展開する
$ unzip -d work archive.zip
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;gz-bz2-xz&#34;&gt;gz, bz2, xz&lt;/h3&gt;

&lt;p&gt;元ファイルは残らない。ディレクトリの圧縮には書庫作成が必要。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# .gz
$ gzip A.txt  # A.txt.gzで圧縮される
$ gunzip A.txt.gz

# .bz2
$ bzip2 A.txt  # A.txt.bz2で圧縮される
$ bunzip2 A.txt.bz2

# .xz
$ xz A.txt  # A.txt.xzで圧縮される
$ xz -d A.txt.xz
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ディレクトリの圧縮と展開&#34;&gt;ディレクトリの圧縮と展開&lt;/h2&gt;

&lt;p&gt;ディレクトリを圧縮する際の手順は、&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;tarコマンドで、複数ファイルを１つのファイルにまとめたアーカイブ（書庫）を作成&lt;/li&gt;
&lt;li&gt;作成したアーカイブを圧縮する&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;tarコマンドの主なオプション&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;オプション&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;説明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;- c&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;アーカイブを作成&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;-x&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;アーカイブを展開&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;-f アーカイブ名&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;アーカイブ名&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;-v&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;詳細表示&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;-z&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;gzip圧縮を行う&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;-j&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;bzip2圧縮を行う&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;-J&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;xz圧縮を行う&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# /etc/postfixディレクトリのアーカイブをカレントディレクトリに作成する
# .tarまで指定すること
$ tar -cvf test.tar /etc/postfix  # test.tarが作成される（作成元は残る）
# test.tarを展開する
$ tar -xvf test.tar

# アーカイブ作成と同時に.gzで圧縮する
$ tar -czvf test.tar.gz /etc/postfix  # test.tar.gzが作成される
# test.tar.gzを展開する（ファイルと違い、test.tar.gzは残る）
$ tar -xzvf test.tar.gz

# アーカイブ作成と同時に.bz2で圧縮する
$ tar -cjvf test.tar.bz2 /etc/postfix  # test.tar.bz2が作成される
# test.tar.bz2を展開する
$ tar -xjvf test.tar.gz

# アーカイブ作成と同時に.xzで圧縮する
$ tar -cJvf test.tar.xz /etc/postfix  # test.tar.xzが作成される
# test.tar.xzを展開する
$ tar -xJvf test.tar.gz
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>bashでディレクトリ・ファイルのコピー・移動・削除を行う</title>
      <link>http://mzgkworks.com/post/bash-directory-operation/</link>
      <pubDate>Wed, 07 Sep 2016 17:09:45 +0900</pubDate>
      
      <guid>http://mzgkworks.com/post/bash-directory-operation/</guid>
      <description>

&lt;h2 id=&#34;cd-ディレクトリ移動&#34;&gt;cd : ディレクトリ移動&lt;/h2&gt;

&lt;p&gt;引数で指定したディレクトリへ移動する。&lt;br /&gt;
他に便利な使い方としては、&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# 引数なし : ホームディレクトリに移動
$ cd

# - : １つ前の作業ディレクトリへ移動
# ２つのディレクトリを交互に操作する際に便利
$ cd -
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;コピー&#34;&gt;コピー&lt;/h2&gt;

&lt;p&gt;ファイルまたはディレクトリをコピーする。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# A.txtをB.txtの名前でコピーする
$ cp A.txt B.txt

# DirディレクトリにA.txtの名前でコピーする。
# Dir部分を「.」にすると、カレントディレクトリを表す。
$ cp A.txt Dir

# A.txtをDirディレクトリにB.txtとしてコピーする。
$ cp A.txt Dir/B.txt

# ディレクトリをコピーする際には「-r」が必要
# A_DirディレクトリをB_Dirディレクトリ配下にコピー
$ cp -r A_Dir B_Dir

# A_DirディレクトリをB_Dirディレクトリ配下にC_Dirディレクトリとしてコピー
# B_Dir配下にC_Dirが存在していない場合
$ cp -r A_Dir B_Dir/C_Dir

# A_Dirディレクトリの中身だけを、B_Dir配下にコピーする
$ cp -r A_Dir/ B_Dir
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;移動とリネーム&#34;&gt;移動とリネーム&lt;/h2&gt;

&lt;p&gt;移動とリネームを行う。ファイルとディレクトリは同様に実行可能。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# A.txtをB.txtにリネームする（同じディレクトリ内）
$ mv A.txt B.txt

# A.txtをA_Dirディレクトリに移動する
$ mv A.txt A_Dir

# A.txtをA_DirディレクトリにB.txtとして移動する
$ mv A.txt A_Dir/B.txt
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ディレクトリの作成&#34;&gt;ディレクトリの作成&lt;/h2&gt;

&lt;p&gt;ディレクトリを作成する。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# 単独
$ mkdir A_Dir

# 複数階層分
$ mkdir -p A_Dir/B_Dir
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;削除&#34;&gt;削除&lt;/h2&gt;

&lt;p&gt;ファイルとディレクトリの削除。&lt;br /&gt;
&lt;strong&gt;ゴミ箱はない。&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# 確認つきでファイルを削除する（yで削除）
$ rm -i A.txt

# ディレクトリの中身ごと削除する
$ rm -r A_Dir
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>シェルでコマンドを打つ際の基本的な機能</title>
      <link>http://mzgkworks.com/post/shell-command-basic/</link>
      <pubDate>Tue, 06 Sep 2016 18:50:36 +0900</pubDate>
      
      <guid>http://mzgkworks.com/post/shell-command-basic/</guid>
      <description>

&lt;p&gt;bashでコマンドを打つ際の基本的な操作のメモ。&lt;/p&gt;

&lt;h2 id=&#34;入力&#34;&gt;入力&lt;/h2&gt;

&lt;h3 id=&#34;補完-コマンド-ファイル名&#34;&gt;補完（コマンド・ファイル名）&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;tabキー : 補完&lt;/li&gt;
&lt;li&gt;tabキー２回 : 候補の一覧を表示&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;履歴&#34;&gt;履歴&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Ctrl + P or ↑ : 新しいものから、古いものへ&lt;/li&gt;
&lt;li&gt;Ctrl + N or ↓ : 古いものから、新しいものへ&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;インクリメンタル検索&#34;&gt;インクリメンタル検索&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Ctrl + P : 開始&lt;/li&gt;
&lt;li&gt;Ctrl + C : 終了&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;パイプ&#34;&gt;パイプ&lt;/h2&gt;

&lt;p&gt;コマンドの結果を別のコマンドへ渡す。&lt;br /&gt;
結果が膨大で画面がスクロールしてしまう時に、lessコマンドに渡して１ページづつ確認するなど。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# ファイル一覧と行数・単語数・バイト数を表示するコマンドを連携し
# ファイル数を数える
$ ls | wc -l

# /etcディレクトリのファイル一覧をlessコマンドで１ページづつ表示
$ ls -l /etc | less
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;リダイレクト&#34;&gt;リダイレクト&lt;/h2&gt;

&lt;p&gt;コマンドの出力結果をファイルに出力する。&lt;br /&gt;
もしくはファイルの内容をコマンドに送る。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;リダイレクト&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;内容&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;出力（上書き）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;gt;&amp;gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;出力（追加）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;lt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;入力&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;lt;&amp;lt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;終端文字列の指定&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# &amp;gt; : 上書き
$ date &amp;gt; today.txt

# &amp;gt;&amp;gt; : 末尾に追加
$ date &amp;gt;&amp;gt; today.txt

# &amp;lt; : sample.txtの中身から&amp;quot;Linux&amp;quot;を検索
$ grep &amp;quot;Linux&amp;quot; &amp;lt; sample.txt

# &amp;lt;&amp;lt; : 入力終端文字列を指定し、複数行のファイルを作成する
$ cat &amp;lt;&amp;lt; _END_ &amp;gt; result.txt
&amp;gt; test1
&amp;gt; test2
&amp;gt; _END_

$ cat result.txt
test1
test2
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;標準エラー出力のみをファイルへ&#34;&gt;標準エラー出力のみをファイルへ&lt;/h3&gt;

&lt;p&gt;処理の記録からエラーメッセージだけを除外する時など。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# 通常
$ ls -l today.txt nofile.txt
ls: nofile.txt: No such file or directory
-rw-r--r--  1 mzgk  staff  96  9  6 18:23 today.txt

# エラーのみerror.txtへ
$ ls -l today.txt nofile.txt 2&amp;gt; error.txt
-rw-r--r--  1 mzgk  staff  96  9  6 18:23 today.txt

# error.txtの中身
$ cat error.txt
ls: nofile.txt: No such file or directory
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;連結&#34;&gt;連結&lt;/h2&gt;

&lt;p&gt;複数のコマンドを連結して使う場合。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;連結&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;内容&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;コマンド１の実行後、コマンド２を実行する&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;amp;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;コマンド１の完了を待たず、コマンド２を実行する&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;amp;&amp;amp;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;コマンド１が正常終了したなら、コマンド２を実行する&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&amp;#124;&amp;#124;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;コマンド１が失敗した場合、コマンド２を実行する&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;メタキャラクタ&#34;&gt;メタキャラクタ&lt;/h2&gt;

&lt;p&gt;ファイル名の指定などに利用する特殊な文字。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;メタキャラクタ&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;説明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;*&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;０文字以上の任意の文字列&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;?&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;任意の１文字&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;[]&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;[]内の任意の１文字&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# *.txt : .txt全て
$ ls *.txt

# 201?.txt : 201+１文字の.txt
$ ls 201?.txt
2016.txt  201a.txt

# 201??.txt : 201+２文字の.txt
20160.txt  201ab.txt

# [ab]*.txt : aまたはbで始まる.txt
$ ls [ab]*.txt
a1.txt  a200.txt  aA.txt  b.txt  bcd.txt

# [1-3].txt : 1〜3の範囲の.txt
$ ls [1-3].txt
1.txt  2.txt  3.txt

# *[24]*.txt : ファイル名に2か4が含まれる.txt
$ ls *[24]*.txt
2.txt  a2.txt a4bc.txt
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>