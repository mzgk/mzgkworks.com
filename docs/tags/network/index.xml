<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Network on mzgkworks.com</title>
    <link>http://mzgkworks.com/tags/network/index.xml</link>
    <description>Recent content in Network on mzgkworks.com</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <atom:link href="http://mzgkworks.com/tags/network/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>CentOS 7でのネットワーク設定・確認方法</title>
      <link>http://mzgkworks.com/post/linux-centos7-network-setting/</link>
      <pubDate>Thu, 08 Sep 2016 18:45:54 +0900</pubDate>
      
      <guid>http://mzgkworks.com/post/linux-centos7-network-setting/</guid>
      <description>

&lt;h2 id=&#34;ネットワークインターフェース&#34;&gt;ネットワークインターフェース&lt;/h2&gt;

&lt;p&gt;CentOS 7では、ネットワークの処理を「NetworkManager」というサービスが担っている。&lt;br /&gt;
NetworkManagerは &lt;code&gt;nmcli&lt;/code&gt;コマンドで管理をする。&lt;/p&gt;

&lt;h3 id=&#34;ネットワークインターフェースの一覧表示&#34;&gt;ネットワークインターフェースの一覧表示&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;$ nmcli device&lt;/code&gt;で確認できる。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;$ nmcli device
デバイス  タイプ    状態      接続
eth0      ethernet  接続済み  System eth0
eth1      ethernet  切断済み  --
eth2      ethernet  切断済み  --
lo        loopback  管理無し  --
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;詳細表示&#34;&gt;詳細表示&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;$ nmcli device show デバイス&lt;/code&gt;で確認できる。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# eth0を詳細表示
$ nmcli device show eth0
GENERAL.デバイス:                        eth0
GENERAL.タイプ:                         ethernet
GENERAL.ハードウェアアドレス:               xx:xx:xx:xx:xx:xx
GENERAL.MTU:                          1500
GENERAL.状態:                          100 (接続済み)
GENERAL.接続:                          System eth0
GENERAL.CON パス:                      /xxx/NetworkManager/xxx
WIRED-PROPERTIES.キャリア:              オン
IP4.アドレス[1]:                        xxx.xx.xx.xxx/23 #IPアドレス
IP4.ゲートウェイ:                        xxx.xx.xx.x #デフォルトゲートウェイ
IP4.DNS[1]:                           xxx.xx.xx.xxx #DNSサーバー１
IP4.DNS[2]:                           xxx.xx.xx.xxx #DNSサーバー２
IP6.アドレス[1]:                        xx:xx:xx:xx:xx:xx/64
IP6.アドレス[2]:                        xx:xx:xx:xx:xx:xx/64
IP6.ゲートウェイ:                        xx::xx
IP6.DNS[1]:                           xx:xx:::xx
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;他には&#34;&gt;他には&lt;/h3&gt;

&lt;p&gt;以下でもネットワークインターフェースの確認が可能。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ ifconfig&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ ip addr&lt;/code&gt;（CentOS 7ではこちらが推奨）&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ホスト名の確認-変更&#34;&gt;ホスト名の確認・変更&lt;/h2&gt;

&lt;p&gt;ホスト名の確認と変更をする方法。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ファイル : /etc/sysconfig/network&lt;/li&gt;
&lt;li&gt;ファイル（CnetOS 7） : /etc/hostname&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# 確認
$ hostname
centos7.sample.com

# 変更（root権限が必要）
$ nmcli general hostname 変更後のホスト名
#または
$ hostnamectl set-hostname 変更後のホスト名
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ipアドレスの設定&#34;&gt;IPアドレスの設定&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;VPSではしないこと。&lt;/strong&gt;&lt;br /&gt;
&lt;code&gt;# nmcli connection modify &amp;quot;ネットワークインターフェース名&amp;quot; ipv4.address IPアドレス/サブネットマスクビット数&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# 固定IP（root権限）
$ nmcli connection modify &amp;quot;System eth0&amp;quot; ipv4.address 192.168.0.10/24

# DHCP（root権限）
$ nmcli c modify &amp;quot;System eth0&amp;quot; ipv4.address auto
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;デフォルトdnsサーバーの設定&#34;&gt;デフォルトDNSサーバーの設定&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;# nmcli connection modify &amp;quot;ネットワークインターフェース名&amp;quot; ipv4.dns IPアドレス&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ファイル : /etc/resolv.conf&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-@bash&#34;&gt;# Google提供のDNSサーバー8.8.8.8と8.8.4.4に変更（root権限）
$ nmcli connection modify &amp;quot;System eth0&amp;quot; ipv4.dns &amp;quot;8.8.8.8 8.8.4.4&amp;quot;

# 設定を反映
$ systemctl restart NetworkManager
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>ネットワークの基礎知識（プロトコル・IPアドレス・サブネットマスク・ポート）</title>
      <link>http://mzgkworks.com/post/network-protocol-ipadress/</link>
      <pubDate>Thu, 08 Sep 2016 16:59:13 +0900</pubDate>
      
      <guid>http://mzgkworks.com/post/network-protocol-ipadress/</guid>
      <description>

&lt;h2 id=&#34;プロトコル&#34;&gt;プロトコル&lt;/h2&gt;

&lt;p&gt;通信規約のこと。&lt;br /&gt;
TCP/IPは１つのプロトコルではなく、TCP及びIPという２つのプロトコルと、関連する多数のプロトコルを含めたプロトコル群を表す。&lt;/p&gt;

&lt;h3 id=&#34;tcp&#34;&gt;TCP&lt;/h3&gt;

&lt;p&gt;Transmission Control Protocol。&lt;br /&gt;
ネットワーク通信において信頼性を確保するためのプロトコル。&lt;br /&gt;
TCP/IPではデータを細切れに分割して通信を行っている（分割データ : パケット）。&lt;br /&gt;
パケットが届いたかどうかを確認し、届いていなければ再送するなどの方法で信頼性の向上を図っている。&lt;/p&gt;

&lt;h3 id=&#34;ip&#34;&gt;IP&lt;/h3&gt;

&lt;p&gt;Internet Protocol。&lt;br /&gt;
ネットワーク上のIPアドレスを規定し、パケットが伝送されるネットワーク経路の制御を担当。&lt;br /&gt;
TCP/IPでは、機器にIPアドレスを割り当てている。&lt;br /&gt;
IPには、以下の２つのバージョンがある。&lt;br /&gt;
IPv4 : 32ビット
IPv6 : 128ビット&lt;/p&gt;

&lt;h3 id=&#34;udp&#34;&gt;UDP&lt;/h3&gt;

&lt;p&gt;User Datagram Protocol。&lt;br /&gt;
TCPがパケットの到達を確認しながら通信するのに対して、UDPは確認を行わない。&lt;br /&gt;
信頼性は劣るが、その分スピードは勝る。&lt;br /&gt;
主に音声や映像通信に使用。&lt;br /&gt;
様々なニーズに答えるためのプロトコルを別個に作成せずに、TCPに比べ何もしないプロトコルとして、必要な機能はアプリケーション側で対応させる方式。&lt;/p&gt;

&lt;h3 id=&#34;icmp&#34;&gt;ICMP&lt;/h3&gt;

&lt;p&gt;Internet Control Message Protocol。&lt;br /&gt;
通信で発生したエラーや制御に関するメッセージを伝送するプロトコル。&lt;/p&gt;

&lt;h2 id=&#34;ipアドレスとサブネットマスク&#34;&gt;IPアドレスとサブネットマスク&lt;/h2&gt;

&lt;p&gt;一般的に人間にわかりやすいように、32ビットを8ビットずつに区切り10進数で表す。&lt;br /&gt;
IPアドレスは、「ネットワーク部」と「ホスト部」から成り立つ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ネットワーク部 : ネットワークを表す&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;ホスト部 : ネットワーク内の機器を表す&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;それぞれの境界を示すために「サブネットマスク」が使われる。&lt;/p&gt;

&lt;p&gt;IPアドレスとサブネットマスクをそれぞれ２進数で表し、サブネットマスクの「１」で覆われる部分が「ネットワーク部」となる。&lt;br /&gt;
（サブネットマスクを10進数で表すと255の部分）&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;IPアドレス : 192.168.1.2
サブネット : 255.255.255.0 の場合
↓
IPアドレス : 11000000. 10101000. 00000001.  00000010
サブネット : 11111111. 11111111. 11111111.  00000000
↓
ネットワーク部 : 192.168.1（24ビット分）
ホスト部　　　 : 2（8ビット分）
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;通信&#34;&gt;通信&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;ネットワーク部&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;通信&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;同じ&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;直接通信が可能&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;異なる&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ルーター（デフォルトゲートウェイ）を介する必要がある&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;特殊アドレス&#34;&gt;特殊アドレス&lt;/h3&gt;

&lt;p&gt;機器に割り当てることのできないアドレスとして以下の２つが存在する。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ネットワークアドレス

&lt;ul&gt;
&lt;li&gt;ネットワーク自体を表す&lt;/li&gt;
&lt;li&gt;ホスト部のビットをすべて０にしたアドレス（最小）&lt;/li&gt;
&lt;li&gt;例 : 192.168.1.0&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ブロードキャストアドレス

&lt;ul&gt;
&lt;li&gt;同じネットワーク内の機器に一斉送信するために使用&lt;/li&gt;
&lt;li&gt;ホスト部のビットをすべて１にしたアドレス（最大）&lt;/li&gt;
&lt;li&gt;例 : 192.168.1.255&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;クラスとcidr&#34;&gt;クラスとCIDR&lt;/h2&gt;

&lt;h3 id=&#34;クラス&#34;&gt;クラス&lt;/h3&gt;

&lt;p&gt;ネットワーク部とホスト部を、あらかじめ決められたビット数で分割する方法。&lt;br /&gt;
クラスごとにサブネットの長さが決まっている。&lt;br /&gt;
Ａ〜Ｅまであるが、通常Ａ〜Ｃが使われる。&lt;br /&gt;
割り当てられる個数はＡ＞Ｂ＞Ｃの順。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;クラス&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;ネットワーク部&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;ホスト部&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;配布個数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Ａ&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;８ビット&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;２４ビット&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2の24乗 = 約1,677万個&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Ｂ&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;１６ビット&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;１６ビット&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2の16乗 = 65,536個&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Ｃ&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;２４ビット&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;８ビット&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2の8乗 = 256個&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;現在では、パターンが少なくIPアドレスの無駄が生じるので「CIDR」の仕組みで扱えるようになっている。&lt;/p&gt;

&lt;h3 id=&#34;cidr&#34;&gt;CIDR&lt;/h3&gt;

&lt;p&gt;インターネット上のIPアドレスの割り当てと経路選択（ルーティング）を柔軟に運用する仕組み。&lt;br /&gt;
クラスの概念をなくし、1ビット単位のサブネットマスクを用いてネットワーク部の大きさを指定し、ホスト部のサイズを柔軟に変更できるようにした。&lt;br /&gt;
表記はネットワークアドレスの末尾に「/」とサブネットマスクのビット数を付加して「192.168.0.0/18」のように記述。&lt;br /&gt;
192.168.0.0/18 → ネットワーク部は18ビット&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;表記&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;192.168.0.0/18&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;サブネットマスク&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;18ビット分&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;サブネットマスク（10進）&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;255.255.192.0&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;サブネットマスク（2進）&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;11111111.11111111.11000000.00000000&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ネットワークアドレス（2進）&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;11000000.10101000.00000000.00000000&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ネットワークアドレス（10進）&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;192.168.0.0&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;割当て可能&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;11000000.10101000.00000000.00000001&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;割当て可能&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;11000000.10101000.00111111.11111110&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;割当て可能&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;192.168.0.1 〜 192.168.63.254&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ブロードキャストアドレス&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;192.168.63.255&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;グローバルとプライベートアドレス&#34;&gt;グローバルとプライベートアドレス&lt;/h2&gt;

&lt;h3 id=&#34;グローバルアドレス&#34;&gt;グローバルアドレス&lt;/h3&gt;

&lt;p&gt;インターネット上で使われるアドレスで、ICANNという組織で管理され、プロバイダーなどを通じて利用者に割り当てられている。&lt;br /&gt;
重複なし。&lt;/p&gt;

&lt;h3 id=&#34;プライベートアドレス&#34;&gt;プライベートアドレス&lt;/h3&gt;

&lt;p&gt;企業や家庭のLAN内で使用するアドレス。&lt;br /&gt;
自由に利用できるが、範囲が決められている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;10.0.0.0 〜 10.255.255.255&lt;/li&gt;
&lt;li&gt;172.16.0.0 〜 172.31.255.255&lt;/li&gt;
&lt;li&gt;192.168.0.0 〜 192.168.255.255&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ポート&#34;&gt;ポート&lt;/h2&gt;

&lt;p&gt;IPアドレスは、ネットワーク上のホストを識別するのに使われる。&lt;br /&gt;
ポートは、１台のホスト上で送信元・先のアプリケーションを識別するために使われる。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;IPアドレス : 建物の住所&lt;/li&gt;
&lt;li&gt;ポート : 部屋番号&lt;/li&gt;
&lt;li&gt;０〜１０２３までが予約されている（ウェルノウンポート）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;例えば、Webであれば、&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ブラウザはWebサーバの８０番ポートに接続し&lt;/li&gt;
&lt;li&gt;Webサーバーは８０番ポートを監視する&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;代表的なポートは以下。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;ポート番号&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;説明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;20&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;FTPデータ転送&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;21&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;FTP制御情報&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;22&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SSH&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;23&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Telnet&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;25&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;メール（SMTP）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;53&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;DNS&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;80&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Web（HTTP）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;110&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;メール（POP）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;143&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;メール（IMAP）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;443&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Web（HTTPS）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
    </item>
    
  </channel>
</rss>