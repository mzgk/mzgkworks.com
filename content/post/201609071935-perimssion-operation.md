+++
categories = ["Usage"]
date = "2016-09-07T19:35:21+09:00"
description = "パーミッションの操作方法。"
draft = false
slug = "linux-permission-operation"
tags = ["Linux"]
title = "パーミッションの操作方法（記号と数値）"

+++

## 所有者と所有グループ
基本的にファイルやディレクトリを作成したユーザーが所有者となる。  
所有グループは、ユーザーを作成した際に同じ名前で作成される。

### 確認
ファイルやディレクトリの所有者を確認する。  
```@bash
# ファイルモード・リンク数・所有者・所有グループ・サイズ・最終更新日・名前
$ ls -l
-rw-rw-r--. 1 couser couser 0  9月  7 18:40 A.txt
drwxrwxr-x. 2 couser couser 6  9月  7 18:40 Sample

```

### 所有者の変更
rootユーザーのみ変更操作が行える。  
ディレクトリの場合は、` -R `オプションを指定する。  
指定しない場合、ディレクトリ配下には変更が適用されない。  
```@bash
# ファイルの所有者をtesterAに変更
$ chown testerA A.txt

# ファイルの所有者とグループ（tester）を変更
$ chown testerA:tester A.txt

# グループだけ変更（所有者を省略すればよい）
$ chown :tester A.txt
```


## アクセス権
「読み取り : r」「書き込み : w」「実行 : x」の３種類。  
「所有者」「所有グループ」「その他」それぞれに対して設定できる。  
` $ ls -l `で表示されたファイルモード部分で確認可能。  
並び順は、「所有者rwx」「所有グループrwx」「その他rwx」。  

### アクセス権
アルファベットと数値で表す。  

| アクセス権 | アルファベット | 数値 |
|:-----------|:---------------|:-----|
| 読み取り   | r              | 4    |
| 書き込み   | w              | 2    |
| 実行       | x              | 1    |

### ファイルのアクセス権
| アクセス権 | 説明                                    |
|:-----------|:----------------------------------------|
| 読み取り   | ファイルの内容をcat等で読むことができる |
| 書き込み   | ファイルの内容を変更できる              |
| 実行       | ファイルを実行できる                    |

### ディレクトリのアクセス権
基本的には実行権は付与するのが普通なので、「rwx」「r-x」「--x」のどれか。  

| アクセス権 | 説明                                     |
|:-----------|:-----------------------------------------|
| 読み取り   | ファイルの一覧を表示できる               |
| 書き込み   | ファイルの作成や削除ができる             |
| 実行       | ディレクトリ内のファイルにアクセスできる |

## アクセス権の変更
変更ができるのは、所有者とrootユーザーのみ。  
記号を使うか、数値で指定することができる。  
ディレクトリの場合は` -R `を指定することで、配下まで適用される。

### アクセス権記号
| 記号       | 説明 |              |
|:-----------|:-----|:-------------|
| 操作対象   | u    | 所有者       |
| 操作対象   | g    | 所有グループ |
| 操作対象   | o    | その他       |
| 操作対象   | a    | 全ユーザー   |
| 操作       | +    | 権限追加     |
| 操作       | -    | 権限削除     |
| 操作       | =    | 権限指定     |
| アクセス権 | r    | 読み取り     |
| アクセス権 | w    | 書き込み     |
| アクセス権 | x    | 実行         |

### 記号方式
現在のアクセス権を基準に、権限の追加や削除をする場合に有効。  
```@bash
# 所有グループとその他に書き込み権を追加
$ chmod uo+w sample.txt

# その他から書き込み権を削除
$ chmod o-w sample.txt
```

### 数値方式
元のアクセス権がどうであっても、指定した数値のアクセス権に変更される。
```@bash
# 所有者:rw- グループ:r-- その他:r--
$ chmod 644 sample.txt

# 所有者:rwx グループ:r-x その他:r-x
$ chmod 755 sample.txt
```
