+++
draft = false
description = "どこにもアタッチされていないEBSをEC2のルートデバイスとしてアタッチする方法。"
date = "2017-02-21T11:51:56+09:00"
categories = ["Usage"]
slug = "attach-ebs-as-rootdevice-of-ec2"
title = "既存のEBSをEC2のルートデバイスとしてアタッチする"
tags = ["AWS"]

+++

どこにもアタッチされていないボリューム（EBS）が存在したので、EC2にアタッチして使いたい。<br>
EC2インスタンスの作成中に、アタッチしたいボリュームを選択できるかと思っていたが、既存ボリュームの追加ができなかった。<br>
なので、EC2インスタンス作成 -> EBSデタッチ -> 対象EBSアタッチの手順を踏んだ際の備忘録。<br>

**EC2インスタンスとアタッチしたいボリューム（EBS）が、同じAZ内であることが前提。**

## 手順
1. EC2インスタンスを作成
  - 作成時にEBSも作成する（後ほどデタッチ -> 削除）
2. EC2が起動
  - ルートデバイスの値を控える /dev/xvdaとか
  - ルートデバイスをクリックして表示されるEBS IDを控える
3. EC2を停止
  - ルートデバイスをクリックして表示されるEBS IDをクリック
4. ボリュームのデタッチ
  - ボリュームが表示される
  - アクション（or 右クリック）-> ボリュームのデタッチ
5. ボリュームのアタッチ
  - 左ペイン -> ボリューム
  - アタッチしたいボリュームを選択
  - アクション（or 右クリック）-> ボリュームのアタッチ
    - インスタンス : アタッチしたいEC2インスタンスを選択
    - デバイス : **2.で控えたルートデバイスの値に変更**
    - アタッチ
6. 確認
  - 左ペイン -> インスタンス
  - 対象のインスタンスを選択
  - ルートデバイスをクリック -> アタッチしたEBSであること
7. デタッチしたEBSを削除


## 注意事項
- アタッチするEC2とEBSが同じAZであること
- EC2削除時のEBS合わせて削除がオフになるので、EBSは個別で削除すること
